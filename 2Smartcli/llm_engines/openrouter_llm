import openai

def get_response(prompt, config):
    api_key = config.get("api_key")
    model = config.get("model", "mistralai/mixtral-8x7b")
    temperature = config.get("temperature", 0.7)

    try:
        response = openai.ChatCompletion.create(
            model=model,
            messages=[{"role": "user", "content": prompt}],
            temperature=temperature,
            api_key=api_key,
            base_url="https://openrouter.ai/api/v1"
        )
        return response.choices[0].message.content.strip()
    except Exception as e:
        return f"OpenRouter error: {e}"
